{
  "$id": "https://raw.githubusercontent.com/solargis/schemas/v1.1.5/solargis_public_TS_request.schema.json",
  "$schema": "http://json-schema.org/draft-07/schema",

  "description": "Schema for Solargis data request - for timeseries datasets.",
  "type": "object",
  "required": [
    "site",
    "timeStep",
    "fromDate",
    "toDate",
    "columns",
    "outputFormat"
  ],
  "additionalProperties": true,
  "properties": {
    "site": {
      "description": "Site location definition.",
      "$ref": "solargis_data_request.schema.json#/$defs/DataRequest/properties/site"
    },
    "timeStep": {
      "type": "string",
      "enum": [
        "PT15M",
        "PT30M",
        "PT60M",
        "P1D",
        "P1M",
        "P1Y"
      ]
    },
    "fromDate": {
      "description": "Start date of the requested data. Inclusive.",
      "$ref": "solargis_data_request.schema.json#/$defs/DataRequest/properties/fromDate"
    },
    "toDate": {
      "description": "End date of the requested data. Inclusive.",
      "$ref": "solargis_data_request.schema.json#/$defs/DataRequest/properties/toDate"
    },
    "columns": {
      "$ref": "solargis_data_request.schema.json#/$defs/DataRequest/properties/columns"
    },
    "utcOffset": {
      "$ref": "solargis_data_request.schema.json#/$defs/DataRequest/properties/utcOffset"
    },
    "timeAlignment": {
      "$ref": "solargis_data_request.schema.json#/$defs/DataRequest/properties/timeAlignment"
    },
    "terrainShading": {
      "$ref": "solargis_data_request.schema.json#/$defs/DataRequest/properties/terrainShading"
    },
    "environment": {
      "$ref": "solargis_data_request.schema.json#/$defs/DataRequest/properties/environment"
    },
    "gtiConfiguration": {
      "$ref": "solargis_data_request.schema.json#/$defs/DataRequest/properties/gtiConfiguration"
    },
    "pvSystem": {
      "description": "Object is required if at least one PV output related column is present in the array of requested columns (PVOUT, TMOD).",
      "$comment": "Each PV simulation engine will have its own separate schema as they are not fully compatible.",
      "oneOf": [
        {
          "$ref": "solargis_pv_configuration_v1.schema.json#/$defs/PvSystem"
        }
      ]
    },
    "fileLabel": {
      "$ref": "solargis_common_types.schema.json#/$defs/FileLabel"
    },
    "outputFormat": {
      "$ref": "solargis_data_request.schema.json#/$defs/DataRequest/properties/outputFormat"
    },
    "compressOutput": {
      "description": "Output dataset will be zipped.",
      "type": "boolean",
      "default": false
    },
    "stochasticGenerator": {
      "$ref": "solargis_data_request.schema.json#/$defs/DataRequest/properties/stochasticGenerator"
    }
  },
  "if": {
    "required": [
      "pvSystem"
    ]
  },
  "then": {
    "not": {
      "required": [
        "gtiConfiguration"
      ]
    }
  }
}